---
title: 'Gestion des Collectes et Dépôts'
---

## Gestion des Collectes

L'API de FedaPay permet d’intégrer facilement des solutions de paiement sécurisées dans votre site web ou application. Ce guide vous expliquera en détail comment configurer et gérer la collecte de paiements à l’aide de l’API, de la création initiale à la finalisation du processus, en passant par les fonctionnalités avancées comme les paiements sans redirection. Que vous soyez développeur ou responsable de produits, vous trouverez ici tout le nécessaire pour utiliser FedaPay de manière optimale.

### Étapes pour Créer et Gérer une Collecte de Paiement

Les étapes de configuration d’une collecte se divisent en plusieurs processus essentiels.

<Steps>
  <Step title=" Initialisation de la Collecte : Création d'une Requête">
    La première étape consiste à envoyer une requête de création de collecte via l’API. Cette requête nécessite certains paramètres obligatoires :

    - **description** : une brève description de l’objet de la collecte
    - **amount** : le montant, toujours en nombre entier
    - **currency** : la devise, indiquée par son numéro ou code ISO (référez-vous au Tableau des Devises FedaPay pour les détails)
    - **callback_url** : un lien de retour facultatif pour rediriger le client après le paiement
    - **customer** : le client concerné par la collecte

    Si le client n’est pas encore enregistré dans votre système, vous pouvez créer simultanément son profil en ajoutant des informations comme le nom, prénom, email, et numéro de téléphone.

    <Info>[Exemple de requête pour créer une collecte](/api-reference/transactions/create)</Info>

    <Note>
    Remplacez **VOTRE_CLE_API_SECRETE** par votre clé API et utilisez l’URL du serveur approprié (**sandbox** ou **live**).
    
    Si le client est déjà enregistré, utilisez simplement son ID ou email pour l’associer à la collecte.
    </Note>

  </Step>
  <Step title="Génération du Token et du Lien de Paiement">
    Une fois la requête envoyée, l'API renvoie un identifiant unique pour la collecte. Utilisez cet identifiant pour demander un lien et un token de paiement pour rediriger le client vers la page de paiement sécurisée.

    <CodeGroup>

    ```java cURL
    curl -X POST \
    https://sandbox-api.fedapay.com/v1/transactions/ID/token \
    -H 'Authorization: Bearer VOTRE_CLE_API_SECRETE' \
    -H 'Content-Type: application/json'
    ```

    ```PHP PHP
    $transaction = \FedaPay\Transaction::create(array(...))
    $token = $transaction->generateToken();
    return header('Location: ' . $token->url);
    ```

    ```javaScript NodeJS
    const transaction = await Transaction.create({...})
    const token = await transaction.generateToken();
    return redirect(token.url);
    ```
    </CodeGroup>

    Le lien ainsi généré peut être utilisé pour rediriger les utilisateurs vers la page de paiement de FedaPay.

  </Step>
  <Step title="Redirection vers la Page de Paiement">
    Ce lien redirige votre client vers une page de paiement sécurisée, où il pourra finaliser la collecte. Si vous avez spécifié un **callback_url**, votre client sera redirigé automatiquement à l’issue du paiement.
  </Step>
  <Step title="Third Step">
    These are instructions or content that only pertain to the third step.
  </Step>
  <Step title="Third Step">
    These are instructions or content that only pertain to the third step.
  </Step>
</Steps>
