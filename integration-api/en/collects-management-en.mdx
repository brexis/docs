---
title: 'Collects and Payouts Management'
---

## Collects Management

The FedaPay API allows you to easily integrate secure payment solutions into your website or application. This guide will walk you through the process of setting up and managing payment collects using the API, from the initial creation to the finalization, including advanced features such as redirection-free payments. Whether you are a developer or a product manager, you'll find everything you need to optimally use FedaPay.

### Steps to Create and Manage a Payment Collect

The steps to set up a collect are broken down into several key processes.

<Steps>
  <Step title="Collect Initialization: Creating a Request">
    The first step is to send a request to create a collect via the API. This request requires certain mandatory parameters:

    * **description**: A brief description of the collect’s purpose

    * **amount**: The amount, always in whole numbers

    * **currency**: The currency, indicated by its ISO code or number (refer to the FedaPay Currency Table for details)

    * **callback_url**: An optional link to redirect the customer after payment

    * **customer**: The customer related to the collect

    If the customer is not yet registered in your system, you can create their profile by adding details such as name, email, and phone number.

    <Info>
      [Example request to create a collect](/api-reference/transactions/create)

      Replace **VOTRE\_CLE\_API\_SECRETE** with your API key and use the URL of the appropriate server (**sandbox** or **live**).

      If the customer is already registered, simply use their ID or email to associate them with the collect.
    </Info>
  </Step>

  <Step title="Generate Token and Payment Link">
    After sending the request, the API will return a unique identifier for the collect. Use this ID to request a payment link and token, which will redirect the customer to a secure payment page.

    <CodeGroup>
      ```java cURL
      curl -X POST \
      https://sandbox-api.fedapay.com/v1/transactions/ID/token \
      -H 'Authorization: Bearer VOTRE_CLE_API_SECRETE' \
      -H 'Content-Type: application/json'
      ```

      ```PHP PHP
      $transaction = \FedaPay\Transaction::create(array(...))
      $token = $transaction->generateToken();
      return header('Location: ' . $token->url);
      ```

      ```javaScript NodeJS
      const transaction = await Transaction.create({...})
      const token = await transaction.generateToken();
      return redirect(token.url);
      ```
    </CodeGroup>

    The generated link can be used to redirect users to FedaPay's secure payment page.
  </Step>

  <Step title="Redirect to Payment Page">
     This link redirects your customer to a secure payment page where they can complete the collect. If you’ve specified a **callback_url**, the customer will automatically be redirected once the payment is complete.
  </Step>

  <Step title="Using the Return Link (Callback URL)">
    The **callback_url** is used to redirect the customer to a specific page after the payment, with the status and collect ID as parameters. For example:

    * **Payment approved** : `https://www.monsite.com/?id=258&status=approved`

    * **Payment canceled** : `https://www.monsite.com/?id=259&status=canceled`

    <Warning>
      **Note**: For security reasons, do not rely solely on the status provided in the URL. Always perform a direct check with the API to get the actual status.
    </Warning>
  </Step>

  <Step title="Retrieve Collect Details">
    To retrieve complete information for a collect, you can send a request using its collection ID.

    <Info>[Example request to retrieve collection details](/api-reference/transactions/get-by-id)</Info>
  </Step>
</Steps>

### Redirection-Free Payments

To provide a seamless experience without redirection, you can integrate the payment form directly into your app for certain methods (MTN Benin, Moov Benin, Moov Togo, and MTN Côte d'Ivoire). This option can be useful for e-commerce websites wishing to keep users on their platform throughout the process.

**Sending a mobile payment without redirection:** :

1. **Create the collect** as described previously, then generate the token.

2. [Use one of the specific methods outlined](/payment-methods/en/payment-methods-en) to process the payment

<Note>
  **Note**: Redirection-free payments are not supported for all operators. For other payment methods, such as Orange and bank cards, prefer the redirection method.
</Note>

### Automatic Retrieval of Collect Status

To check the final status of a collection, especially during redirection-free payments:

* Send a request to retrieve the collection’s details.

* **Implement a webhook** to receive automatic notifications. [See the Webhooks section for more details.](/integration-api/en/webhooks-en).

### Collect Lifecycle: Statuses

Each collection passes through various statuses:

* **pending** : Pending (default status upon creation)

* **approved** : Approved (successful payment)

* **declined** : Declined (insufficient funds or other payment issues)

* **canceled** : Canceled (voluntary or accidental interruption by the customer)

* **refunded** : Refunded (amount reversed to the customer)

* **transferred** : Transferred (amount moved to the merchant account)

<Note>To view the real-time status, visit the FedaPay dashboard under the **Collects** section or use the API to check using the collect ID.</Note>

## Payouts Management

A payout is an operation that allows you to transfer money directly from your balance to a customer’s account. This feature is designed for businesses that need to handle payments to specific clients.

### Steps to Create a Payout

Creating a payout through the API involves several steps. Each payout follows processes that must be respected to ensure smooth transfer.

<Steps>
  <Step title="Payout Creation Request">
To begin, you need to send a request to create a payout via our API. The essential information required in the request includes:

    * amount : The amount for the payout, always in whole numbers.

    * currency : The currency to be used for the payout. You can indicate the ISO code of the chosen currency (e.g., XOF for CFA francs).

    * customer : The customer receiving the payout. If the customer is not yet in your database, you can create them at the same time by providing details such as name, email, and phone number.

    <Info>
      [API code to create a payout](/api-reference/payouts/create)

      Sample code is available to simplify the creation of a repository via the API. Be sure to replace **YOUR_SECRETE_API_KEY** with your sandbox or live private key.
    </Info>
  </Step>

  <Step title="Envoi du Dépôt">
    Après avoir créé un dépôt, il sera marqué comme "en attente". Vous devez ensuite procéder à son envoi. Deux options s’offrent à vous :

    * Envoyer le dépôt immédiatement

    * Planifier l'envoi pour plus tard

    <Info>
      [Code API pour l’envoi du dépôt](/api-reference/payouts/update-start)

      Utilisez le code PHP, Node.js ou Ruby pour envoyer le dépôt en remplaçant **VOTRE\_CLE\_API\_PRIVEE** par votre clé privée.
    </Info>
  </Step>

  <Step title="Récupération des Détails d'un Dépôt">
    Une fois le dépôt créé et/ou envoyé, vous pouvez consulter ses détails pour obtenir des informations spécifiques, telles que le statut ou l’historique du dépôt.

    <Info>
      [Code API pour récupérer les détails d'un dépôt](/api-reference/payouts/get-by-id)

      Récupérez les informations d’un dépôt spécifique en utilisant son identifiant unique (ID). Remplacez **ID** dans l'URL par l'identifiant du dépôt que vous souhaitez consulter.
    </Info>
  </Step>
</Steps>

### Cycle de Vie des Dépôts

Lorsqu'un dépôt est créé, il passe par plusieurs statuts :

* **pending (En attente)** : Statut initial après la création du dépôt.

* **started (Démarré)** : Le dépôt a été validé et l’envoi est en cours de démarrage.

* **processing (En cours d'envoi)** : Le dépôt est en cours de traitement et d’envoi vers le destinataire.

* **sent (Envoyé)** : Le dépôt a été envoyé avec succès au destinataire.

* **failed (Échoué)** : L’envoi du dépôt a échoué, pour des raisons qui peuvent varier (erreur technique, problème avec la méthode de versement, etc.).

Vous pouvez suivre l'évolution du statut de vos dépôts à partir du tableau de bord FedaPay dans le menu Dépots.

### Méthodes de Versement Disponibles

Actuellement, [les méthodes de versement](/payment-methods/fr/payment-methods-fr) prises en charge pour les dépôts sont disponibles dans plusieurs pays de la sous-région

Ces méthodes permettent d'envoyer facilement des fonds vers différents pays d'Afrique de l'Ouest.

### Support

Si vous avez des questions ou rencontrez des difficultés avec les dépôts, n'hésitez pas à contacter notre support technique à l’adresse : [`support@fedapay.com`](mailto:support@fedapay.com)