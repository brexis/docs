---
title: 'Collects and Payouts Management'
---

## Collects Management

The FedaPay API allows you to easily integrate secure payment solutions into your website or application. This guide will walk you through the process of setting up and managing payment collects using the API, from the initial creation to the finalization, including advanced features such as redirection-free payments. Whether you are a developer or a product manager, you'll find everything you need to optimally use FedaPay.

### Steps to Create and Manage a Payment Collect

The steps to set up a collect are broken down into several key processes.

<Steps>
  <Step title="Collect Initialization: Creating a Request">
    The first step is to send a request to create a collect via the API. This request requires certain mandatory parameters:

    * **description**: A brief description of the collect’s purpose

    * **amount**: The amount, always in whole numbers

    * **currency**: The currency, indicated by its ISO code or number (refer to the FedaPay Currency Table for details)

    * **callback_url**: An optional link to redirect the customer after payment

    * **customer**: The customer related to the collect

    If the customer is not yet registered in your system, you can create their profile by adding details such as name, email, and phone number.

    <Info>
      [Example request to create a collect](/api-reference/transactions/create)

      Replace **VOTRE\_CLE\_API\_SECRETE** with your API key and use the URL of the appropriate server (**sandbox** or **live**).

      If the customer is already registered, simply use their ID or email to associate them with the collect.
    </Info>
  </Step>

  <Step title="Generate Token and Payment Link">
    After sending the request, the API will return a unique identifier for the collect. Use this ID to request a payment link and token, which will redirect the customer to a secure payment page.

    <CodeGroup>
      ```java cURL
      curl -X POST \
      https://sandbox-api.fedapay.com/v1/transactions/ID/token \
      -H 'Authorization: Bearer VOTRE_CLE_API_SECRETE' \
      -H 'Content-Type: application/json'
      ```

      ```PHP PHP
      $transaction = \FedaPay\Transaction::create(array(...))
      $token = $transaction->generateToken();
      return header('Location: ' . $token->url);
      ```

      ```javaScript NodeJS
      const transaction = await Transaction.create({...})
      const token = await transaction.generateToken();
      return redirect(token.url);
      ```
    </CodeGroup>

    The generated link can be used to redirect users to FedaPay's secure payment page.
  </Step>

  <Step title="Redirect to Payment Page">
     This link redirects your customer to a secure payment page where they can complete the collect. If you’ve specified a **callback_url**, the customer will automatically be redirected once the payment is complete.
  </Step>

  <Step title="Using the Return Link (Callback URL)">
    The **callback_url** is used to redirect the customer to a specific page after the payment, with the status and collect ID as parameters. For example:

    * **Payment approved** : `https://www.monsite.com/?id=258&status=approved`

    * **Payment canceled** : `https://www.monsite.com/?id=259&status=canceled`

    <Warning>
      **Note**: For security reasons, do not rely solely on the status provided in the URL. Always perform a direct check with the API to get the actual status.
    </Warning>
  </Step>

  <Step title="Retrieve Collect Details">
    To retrieve complete information for a collect, you can send a request using its collection ID.

    <Info>[Example request to retrieve collection details](/api-reference/transactions/get-by-id)</Info>
  </Step>
</Steps>

### Redirection-Free Payments

To provide a seamless experience without redirection, you can integrate the payment form directly into your app for certain methods (MTN Benin, Moov Benin, Moov Togo, and MTN Côte d'Ivoire). This option can be useful for e-commerce websites wishing to keep users on their platform throughout the process.

**Sending a mobile payment without redirection:** :

1. **Créer une collecte** comme décrit précédemment, puis générer le token.

2. [Utilisez une des méthodes spécifiques suivantes](/payment-methods/fr/payment-methods-fr) pour traiter le paiement

<Note>
  **Remarque** : Le paiement sans redirection ne prend pas en charge tous les opérateurs. Pour les autres moyens de paiement comme Orange et les cartes bancaires, préférez le mode de redirection.
</Note>

### Récupération Automatique du Statut d’une Collecte

Pour vérifier le statut final d’une collecte, surtout lors d’un paiement sans redirection :

* Envoyez une requête pour obtenir les détails de la collecte.

* **Implémentez un webhook** pour recevoir des notifications automatiques. [Consultez la section Webhooks pour plus de détails](/integration-api/fr/webhooks-fr).

### Cycle de Vie d’une Collecte : Les Statuts

Chaque collecte passe par différents statuts :

* **pending** : En attente (statut par défaut à la création)

* **approved** : Approuvée (paiement réussi)

* **declined** : Déclinée (solde insuffisant ou autre problème de paiement)

* **canceled** : Annulée (interruption volontaire ou accidentelle par le client)

* **refunded** : Remboursée (somme reversée au client)

* **transferred** : Transférée (montant transféré sur le compte marchand)

<Note>Pour consulter le statut en temps réel, rendez-vous dans le tableau de bord FedaPay sous la section Collectes ou utilisez l’API pour vérifier avec l'ID de la collecte.</Note>

## Gestion des dépôts

Un dépôt est une opération qui permet de transférer de l'argent directement à partir de votre balance vers le compte d'un client. Cette fonctionnalité est conçue pour les entreprises qui ont besoin de gérer des paiements vers des clients spécifiques.

### Étapes pour la Création d’un Dépôt

La création d’un dépôt via l’API se déroule en plusieurs étapes. Chaque dépôt passe par différents processus qui doivent être respectés pour garantir le bon déroulement du transfert.

<Steps>
  <Step title="Requête de Création d'un Dépôt">
    Pour commencer, vous devez envoyer une requête de création de dépôt via notre API. Les informations essentielles à fournir lors de cette requête incluent :

    * amount : Le montant du dépôt, toujours indiqué en nombre entier.

    * currency : La devise à utiliser pour le dépôt. Vous pouvez indiquer le code ISO de la devise choisie (par exemple, XOF pour le franc CFA).

    * customer : Le client concerné par le dépôt. Si le client n'existe pas encore dans votre base de données, vous pouvez le créer en même temps que le dépôt en fournissant les informations suivantes : nom, prénom, adresse e-mail, et numéro de téléphone.

    <Info>
      [Code API pour la création d’un dépôt](/api-reference/payouts/create)

      Un exemple de code est disponible pour simplifier la création d’un dépôt via l'API. Assurez-vous de remplacer **VOTRE\_CLE\_API\_PRIVEE** par votre clé privée sandbox ou live.
    </Info>
  </Step>

  <Step title="Envoi du Dépôt">
    Après avoir créé un dépôt, il sera marqué comme "en attente". Vous devez ensuite procéder à son envoi. Deux options s’offrent à vous :

    * Envoyer le dépôt immédiatement

    * Planifier l'envoi pour plus tard

    <Info>
      [Code API pour l’envoi du dépôt](/api-reference/payouts/update-start)

      Utilisez le code PHP, Node.js ou Ruby pour envoyer le dépôt en remplaçant **VOTRE\_CLE\_API\_PRIVEE** par votre clé privée.
    </Info>
  </Step>

  <Step title="Récupération des Détails d'un Dépôt">
    Une fois le dépôt créé et/ou envoyé, vous pouvez consulter ses détails pour obtenir des informations spécifiques, telles que le statut ou l’historique du dépôt.

    <Info>
      [Code API pour récupérer les détails d'un dépôt](/api-reference/payouts/get-by-id)

      Récupérez les informations d’un dépôt spécifique en utilisant son identifiant unique (ID). Remplacez **ID** dans l'URL par l'identifiant du dépôt que vous souhaitez consulter.
    </Info>
  </Step>
</Steps>

### Cycle de Vie des Dépôts

Lorsqu'un dépôt est créé, il passe par plusieurs statuts :

* **pending (En attente)** : Statut initial après la création du dépôt.

* **started (Démarré)** : Le dépôt a été validé et l’envoi est en cours de démarrage.

* **processing (En cours d'envoi)** : Le dépôt est en cours de traitement et d’envoi vers le destinataire.

* **sent (Envoyé)** : Le dépôt a été envoyé avec succès au destinataire.

* **failed (Échoué)** : L’envoi du dépôt a échoué, pour des raisons qui peuvent varier (erreur technique, problème avec la méthode de versement, etc.).

Vous pouvez suivre l'évolution du statut de vos dépôts à partir du tableau de bord FedaPay dans le menu Dépots.

### Méthodes de Versement Disponibles

Actuellement, [les méthodes de versement](/payment-methods/fr/payment-methods-fr) prises en charge pour les dépôts sont disponibles dans plusieurs pays de la sous-région

Ces méthodes permettent d'envoyer facilement des fonds vers différents pays d'Afrique de l'Ouest.

### Support

Si vous avez des questions ou rencontrez des difficultés avec les dépôts, n'hésitez pas à contacter notre support technique à l’adresse : [`support@fedapay.com`](mailto:support@fedapay.com)